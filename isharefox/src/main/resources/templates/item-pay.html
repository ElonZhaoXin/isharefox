<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>welcome isharefoxer</title>

    <!-- Bootstrap core CSS -->
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>

    <!-- Custom styles for this template -->
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/css/item-pay.css}">
</head>
<!-- NAVBAR
================================================== -->
<body>
<div class="navbar-wrapper">
    <div class="container">
        <nav class="navbar navbar-static-top">
            <div class="container">

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                            aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">
                        爱享狐-isharefox
                        <!--<img alt="isharefox" src="isharefox.png">-->
                    </a>
                </div>

                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <!-- <li class="active"><a href="#">Home</a></li> -->
                        <li><a href="/user/index">视频教程</a></li>
                        <li><a href="/login.html">下线推广</a></li>
                        <li><a href="/register.html">成为合伙人</a></li>
                        <li><a href="/register.html">搭建分站</a></li>
                        <li><a href="/register.html">常见问题</a></li>
                        <li><a href="/register.html">联系我们</a></li>
                    </ul>
                </div>
            </div>
        </nav>

    </div>

    <div class="top-bannar">
        <div class="container">
            <div class="row row-style">

                <div class="col-lg-3 layui-col-md-offset1">
                    <th:block>
                        <img th:src="${page.qrCodeBase64}"/>
                        <!--   type="hidden"     -->
                        <input id="webSocketUrl" type="hidden" th:value="${page.webSocketUrl}"/>
                    </th:block>
                </div><!-- /.col-lg-8 -->
                <div class="col-lg-4 code-style">
                    <p>打开手机支付宝</p>
                    <p>扫一扫付款获取密码</p>

                    <form class="layui-form layui-form-pane" action="">
                        <div class="layui-form-item order-item">
                            <label class="layui-form-label order-label">订单号</label>
                            <div class="layui-input-block order-input">
                                <input type="text" id="orderId" th:value="${page.getOrderInfo().getOutTradeNo()}"
                                       required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item order-item">
                            <label class="layui-form-label order-label">密码</label>
                            <div class="layui-input-block order-password-input">
                                    <input type="text" id="password" required  lay-verify="required" placeholder="支付后获取" autocomplete="off" class="layui-input">
<!--                                    <button type="button" class="layui-btn layui-btn-fluid">流体按钮（最大化适应）</button>-->
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-lg-4">
                    <div class="layui-row">

                        <!--<h2>加入我们</h2>-->
                        <form class="layui-form auth-form-body">
                            <div>
                                <i class="layui-icon layui-icon-username user-password-icon"></i>
                                <label>Email address</label>
                                <input type="text" name="username" placeholder="请输入邮箱"
                                       lay-verify="required|email" value="123@abc.com" autocomplete="off"
                                       class="layui-input input-block">
                            </div>
                            <div>
                                <i class="layui-icon layui-icon-password user-password-icon"></i>
                                <label>Password</label><a class="label-link" href="/password_reset">Forgot
                                password?</a>
                                <input type="password" name="password" placeholder="请输入密码" value="123123"
                                       lay-verify="required" autocomplete="off" class="layui-input input-block">
                            </div>
                            <!--
                            <div>
                                <input type="text" name="kaptcha" placeholder="请输入验证码" autocomplete="off" lay-verify="required" class="layui-input admin-input admin-input-verify">
                                <img class="admin-captcha" width="90" id="kaptcha" lay-filter="kaptcha" height="30" src="">
                            </div>
                            -->
                            <button class="layui-btn layui-btn-normal" lay-submit lay-filter="submit">
                                登 录
                            </button>
                            <button class="layui-btn layui-btn-normal" lay-submit lay-filter="submit">
                                立 即 加 入
                            </button>
                        </form>
                    </div>
                </div><!-- /.col-lg-4 -->
            </div><!-- /.row -->
        </div><!-- /.container -->
    </div>


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

        <!-- START THE FEATURETTES -->

        <hr class="featurette-divider">
        <div class="row featurette">
            <div class="col-md-7">
                <h2 class="featurette-heading">首先，将你的电子书、视频等资源加密压缩 <span class="text-muted">记录好密码</span></h2>
                <p class="lead">使用winrar或者免费的zip都可以做到；注意里面一定包含txt文件，说明支付地址。可以用下面这个示例，1分钱尝试一下。</p>
            </div>
            <div class="col-md-5">

                <!--
                <img class="featurette-image img-responsive center-block" data-src="/images/demo.jpg"
                     alt="isharefox image">
                -->
                <img class="featurette-image img-responsive center-block" alt="isharefox image"
                     lay-src="/images/demo.jpg">
            </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
            <div class="col-md-7 col-md-push-5">
                <h2 class="featurette-heading">其次，将你的资源上传网盘 <span class="text-muted">例如百度网盘</span></h2>
                <p class="lead">一定要是公开分享的模式，不要设置提取码。否则影响用户支付意愿！</p>
            </div>
            <div class="col-md-5 col-md-pull-7">
                <img class="featurette-image img-responsive center-block" alt="isharefox image"
                     lay-src="/images/demo.jpg">
            </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
            <div class="col-md-7">
                <h2 class="featurette-heading">最后，将此商品的信息发布到isharefox<span class="text-muted">然后坐等收款</span></h2>
            </div>
            <div class="col-md-5">
                <img class="featurette-image img-responsive center-block" alt="isharefox image"
                     lay-src="/images/demo.jpg">
            </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
            <div class="col-md-7 col-md-push-5">
                <h2 class="featurette-heading">还可以推广你的资源 <span class="text-muted">吸引更多用户</span></h2>
                <p class="lead">例如百度网盘的资源，去百度注册资源，提高搜索排名</p>
            </div>
            <div class="col-md-5 col-md-pull-7">
                <img class="featurette-image img-responsive center-block" alt="isharefox image"
                     lay-src="/images/demo.jpg">
            </div>
        </div>

        <hr class="featurette-divider">

        <div class="row featurette">
            <div class="col-md-7">
                <h2 class="featurette-heading">邀请他人注册，他的每一笔收益你都会有分成！<span class="text-muted">邀请越多，收益越多！</span></h2>
                <p class="lead">例如百度网盘的资源，去百度注册资源，提高搜索排名</p>
            </div>
            <div class="col-md-5">
                <img class="featurette-image img-responsive center-block" alt="isharefox image"
                     lay-src="/images/demo.jpg">
            </div>
        </div>

        <hr class="featurette-divider">

        <!-- /END THE FEATURETTES -->


        <!-- FOOTER -->
        <footer>
            <p class="pull-right"><a href="#">Back to top</a></p>
            <p>&copy; 2020 ISHAREFOX, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
        </footer>

    </div><!-- /.container -->

</div>
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

<script src="/layui/layui.all.js"></script>

<script>
    layui.config({
        base: '/js/modules/' //你存放新模块的目录，注意，不是layui的模块目录
    }).use('login'); //加载入口
</script>

<script>
    var $ = layui.$;
    var webSocketUrl = $("#webSocketUrl").val();
    var orderId = $("#orderId").val();
    initWebsocket();

    /**
     * 连接到服务端ws
     */
    function initWebsocket() {
        if ("WebSocket" in window) {
            //alert("您的浏览器支持 WebSocket!");
            // 打开一个 web socket
            var ws = new WebSocket(webSocketUrl);

            ws.onopen = function () {
                // Web Socket 已连接上，使用 send() 方法发送数据
                //ws.send("来自客户端消息message");
            };

            ws.onmessage = function (evt) {
                var received_msg = evt.data;
                alert("服务器推送消息：" + received_msg);
                $("#password").val(received_msg);
            };

            // ws.onclose = function()
            // {
            //     // 关闭 websocket
            //     alert("连接已关闭...");
            // };
        } else {
            // 浏览器不支持 WebSocket
            alert("您的浏览器不支持 WebSocket可能不发!");
        }
    }
</script>
</body>


</html>
